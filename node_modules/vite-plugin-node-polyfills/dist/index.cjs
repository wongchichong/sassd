"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const p=require("node:module"),b=require("@rollup/plugin-inject"),g=require("node-stdlib-browser"),m=require("node-stdlib-browser/helpers/rollup/plugin"),_=require("node-stdlib-browser/helpers/esbuild/plugin"),f=e=>e&&e.__esModule?e:{default:e},h=f(b),B=f(g),q=f(_),u=e=>e?e===!0?!0:e==="build":!1,c=e=>e?e===!0?!0:e==="dev":!1,y=e=>e.startsWith("node:"),P=(e={})=>{const s=p.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href).resolve("node-stdlib-browser/helpers/esbuild/shim"),r={exclude:[],protocolImports:!0,...e,globals:{Buffer:!0,global:!0,process:!0,...e.globals}},d=t=>r.exclude.some(n=>t===n||t===`node:${n}`);return{name:"vite-plugin-node-polyfills",config:(t,n)=>{const a=Object.entries(B.default).reduce((o,[l,i])=>(!r.protocolImports&&y(l)||d(l)||(o[l]=i),o),{});return{build:{rollupOptions:{onwarn:(o,l)=>{m.handleCircularDependancyWarning(o,l)},plugins:[{...h.default({...u(r.globals.Buffer)?{Buffer:[s,"Buffer"]}:{},...u(r.globals.global)?{global:[s,"global"]}:{},...u(r.globals.process)?{process:[s,"process"]}:{}})}]}},optimizeDeps:{esbuildOptions:{define:{...c(r.globals.Buffer)?{Buffer:"Buffer"}:{},...c(r.globals.global)?{global:"global"}:{},...c(r.globals.process)?{process:"process"}:{}},inject:[s],plugins:[q.default(a),{name:"vite-plugin-node-polyfills-shims-resolver",setup(o){const l=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`^${l}$`);o.onResolve({filter:i},()=>({external:!1,path:s}))}}]}},resolve:{alias:{...a}}}}}};exports.nodePolyfills=P;
//# sourceMappingURL=index.cjs.map
